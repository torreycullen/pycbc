

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pycbc.workflow.configuration &mdash; PyCBC 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PyCBC 0.1 documentation" href="../../../index.html"/>
        <link rel="up" title="pycbc" href="../../pycbc.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../../index.html" class="icon icon-home"> PyCBC
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installing PyCBC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#setting-up-a-virtual-environment-for-installing-pycbc">Setting up a virtual environment for installing PyCBC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install_virtualenv.html">Setting up virtualenv</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../install_virtualenv.html#install-pip">Install pip</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../install_virtualenv.html#install-virtualenv">Install virtualenv</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#installing-lalsuite-into-a-virtual-environment">Installing lalsuite into a virtual environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install_lalsuite.html">Installing lalsuite for PyCBC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../install_lalsuite.html#obtaining-the-source-code-and-checking-out-a-version">Obtaining the source code and checking out a version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../install_lalsuite.html#building-and-installing-into-your-virtual-environment">Building and installing into your virtual environment</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#installing-pycbc-in-a-virtual-environment">Installing PyCBC in a virtual environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#installing-a-released-version-of-pycbc">Installing a released version of PyCBC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#installing-source-from-github-for-development">Installing source from GitHub for development</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#building-and-installing-documentation">Building and Installing Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../build_gh_pages.html">Building Documentation for Git Hub Pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../build_gh_pages.html#creating-a-git-hub-project-page">Creating a Git Hub project page</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../build_gh_pages.html#building-and-pushing-the-documentation">Building and pushing the documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#modifying-pycbc-glue-and-pycbc-pylal">Modifying pycbc-glue and pycbc-pylal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#use-of-intel-mkl-optimized-fft-libraries">Use of Intel MKL Optimized FFT libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#graphics-processing-unit-support-with-cuda">Graphics Processing Unit support with CUDA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install_cuda.html">Instructions to add CUDA support (optional)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../install_cuda.html#installing-the-cuda-dependencies">Installing the CUDA dependencies</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../workflow.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../workflow.html#workflow-to-do-list">Workflow to do list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../workflow.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#pycbc-make-coinc-workflow"><code class="docutils literal"><span class="pre">pycbc_make_coinc_workflow</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/pycbc_make_coinc_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_coinc_workflow</span></code>: A CBC analysis workflow generator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#pycbc-make-sngl-workflow"><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/pycbc_make_sngl_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code>: A single-ifo detchar tool</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#pycbc-make-daily-workflow"><code class="docutils literal"><span class="pre">pycbc_make_daily_workflow</span></code></a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#data-checker"><cite>data_checker</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#pygrb"><code class="docutils literal"><span class="pre">pygrb</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/pygrb.html">PyGRB: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../workflow.html#workflow-module-documentation">Workflow module documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#initialization">Initialization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/initialization.html">Pycbc&#8217;s workflow module configuration file(s) and command line interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#generating-segments">Generating segments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/segments.html">The workflow segment generation module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#obtaining-data">Obtaining data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/datafind.html">The workflow datafind and validation module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#injection-generation">Injection generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/injections.html">The workflow injection generation module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#time-slide-generation">Time-slide generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/time_slides.html">The workflow time-slide generation module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#template-bank">Template bank</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/template_bank.html">The workflow template bank generation module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#split-table">Split table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/splittable.html">The workflow table splitting module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#matched-filtering">Matched-filtering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/matched_filter.html">The workflow matched-filter module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#coincidence">Coincidence</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/coincidence.html">The workflow coincidence module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#post-processing-preparation">Post processing preparation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/postprocprep.html">The workflow postprocessing preparation module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../workflow.html#post-processing">Post-processing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../workflow/postproc.html">The workflow postprocessing module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../workflow.html#method-documentation">Method documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../pycbc.workflow.html">pycbc.workflow package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.analysislogging">pycbc.workflow.analysislogging module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.coincidence">pycbc.workflow.coincidence module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.configparser_test">pycbc.workflow.configparser_test module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.configuration">pycbc.workflow.configuration module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.core">pycbc.workflow.core module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.datafind">pycbc.workflow.datafind module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.injection">pycbc.workflow.injection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.jobsetup">pycbc.workflow.jobsetup module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.legacy_ihope">pycbc.workflow.legacy_ihope module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.matched_filter">pycbc.workflow.matched_filter module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.pegasus_workflow">pycbc.workflow.pegasus_workflow module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.plotting">pycbc.workflow.plotting module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.postprocessing">pycbc.workflow.postprocessing module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.postprocessing_prep">pycbc.workflow.postprocessing_prep module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.segment">pycbc.workflow.segment module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.splittable">pycbc.workflow.splittable module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.summaryplots">pycbc.workflow.summaryplots module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.timeslides">pycbc.workflow.timeslides module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow.tmpltbank">pycbc.workflow.tmpltbank module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.workflow.html#module-pycbc.workflow">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal"><span class="pre">pycbc.tmpltbank</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tmpltbank.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tmpltbank.html#non-spin-bank-placement-pycbc-geom-nonspinbank">Non spin bank placement: pycbc_geom_nonspinbank</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#some-examples">Some examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../tmpltbank.html#aligned-spin-geometric-placement-pycbc-geom-aligned-bank">Aligned-spin geometric placement: pycbc_geom_aligned_bank</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#id1">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#id2">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#id3">Some examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#id4">Command line options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../tmpltbank.html#aligned-spin-stochastic-placement">Aligned-spin stochastic placement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#id5">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#id6">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#ian-s-recommendation-which-stochastic-code-should-i-use">Ian&#8217;s recommendation: Which stochastic code should I use?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../tmpltbank.html#i-want-to-use-the-f2-or-r2f4-metric">I want to use the F2 or R2F4 metric</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tmpltbank.html#i-want-to-use-another-metric-ie-an-imr-metric">I want to use another metric, ie. an IMR metric</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../tmpltbank.html#i-want-to-use-direct-match">I want to use direct match</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#id7">Some examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#command-line-options-pycbc-aligned-stoch-bank">Command line options: pycbc_aligned_stoch_bank</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#command-line-options-lalapps-cbc-sbank">Command line options: lalapps_cbc_sbank</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tmpltbank.html#command-line-options-lalapps-cbc-sbank-pipe">Command line options: lalapps_cbc_sbank_pipe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../tmpltbank.html#hybrid-approaches-the-best-of-both-worlds">Hybrid approaches: the best of both worlds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tmpltbank.html#the-module-s-source-code">The module&#8217;s source code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../pycbc.tmpltbank.html">pycbc.tmpltbank package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.bank_output_utils">pycbc.tmpltbank.bank_output_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.brute_force_methods">pycbc.tmpltbank.brute_force_methods module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.calc_moments">pycbc.tmpltbank.calc_moments module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.coord_utils">pycbc.tmpltbank.coord_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.em_progenitors">pycbc.tmpltbank.em_progenitors module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.lambda_mapping">pycbc.tmpltbank.lambda_mapping module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.lattice_utils">pycbc.tmpltbank.lattice_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.option_utils">pycbc.tmpltbank.option_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank.partitioned_bank">pycbc.tmpltbank.partitioned_bank module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.tmpltbank.html#module-pycbc.tmpltbank">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../pycbc.psd.html">pycbc.psd package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.psd.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.psd.html#module-pycbc.psd.analytical">pycbc.psd.analytical module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.psd.html#module-pycbc.psd.estimate">pycbc.psd.estimate module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.psd.html#module-pycbc.psd.read">pycbc.psd.read module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.psd.html#module-pycbc.psd">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../pycbc.noise.html">pycbc.noise package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.noise.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.noise.html#module-pycbc.noise.gaussian">pycbc.noise.gaussian module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../pycbc.noise.html#module-pycbc.noise">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../frame.html">Reading Gravitational-wave Frames (<code class="docutils literal"><span class="pre">pycbc.frame</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../frame.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frame.html#module-pycbc.frame">Method documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../banksim.html">Dag Generator for Doing Banksims</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../banksim.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../banksim.html#how-to-generate-a-workflow-to-do-a-large-banksim">How to generate a workflow to do a large banksim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../banksim.html#creating-an-ini-file">Creating an INI file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../banksim.html#generating-the-workflow">Generating the workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../banksim.html#understanding-the-results">Understanding the results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../banksim.html#workflow-considerations">Workflow considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../banksim.html#example-config-files">Example config files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../faithsim.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faithsim.html#how-to-generate-a-workflow">How to generate a workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../faithsim.html#creating-a-configuration-ini-file">Creating a configuration (.ini) file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../faithsim.html#generating-the-workflow">Generating the workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../faithsim.html#understanding-the-results">Understanding the results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../faithsim.html#example-config-files">Example config files</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../workflow/pycbc_bns_hdf_config_walkthrough.html">Walkthrough of running the PyCBC BNS focused pipeline on SUGAR</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../workflow/pycbc_bns_hdf_config_walkthrough.html#run-sh">run.sh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../workflow/pycbc_bns_hdf_config_walkthrough.html#config-file">config file</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../waveform.html">Waveforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../waveform.html#what-waveforms-can-i-generate">What waveforms can I generate?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../waveform.html#plotting-time-domain-waveforms">Plotting Time Domain Waveforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../waveform.html#calculating-the-match-between-waveforms">Calculating the match between waveforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../waveform.html#plotting-a-td-and-fd-waveform-together-in-the-td">Plotting a TD and FD waveform together in the TD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../waveform.html#plotting-gw-phase-and-amplitude-of-td-waveform">Plotting GW phase and amplitude of TD waveform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../waveform.html#plotting-frequency-evolution-of-td-waveform">Plotting frequency evolution of TD waveform</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">Documenting PyCBC code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../documentation.html#sphinx">Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../documentation.html#documenting-the-pycbc-package">Documenting the PyCBC package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../documentation.html#documenting-pycbc-modules">Documenting PyCBC modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../documentation.html#documenting-pycbc-scripts">Documenting PyCBC scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release.html">Creating Releases of PyCBC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../release.html#creating-the-release-on-github">Creating the release on GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../release.html#uploading-to-the-python-package-index">Uploading to the Python Package Index</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../formats/hdf_format.html">HDF files within the PyCBC workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../formats/hdf_format.html#single-inspiral-triggers">single inspiral triggers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../formats/hdf_format.html#executables">Executables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../formats/hdf_format.html#specification">Specification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../formats/hdf_format.html#combined-single-inspiral-triggers">combined single inspiral triggers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../formats/hdf_format.html#id1">Executables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../formats/hdf_format.html#id2">Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../formats/hdf_format.html#example-uses">Example uses</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">PyCBC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
          <li><a href="../../pycbc.html">pycbc</a> &raquo;</li>
      
    <li>pycbc.workflow.configuration</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for pycbc.workflow.configuration</h1><div class="highlight"><pre>
<span class="c"># Copyright (C) 2013  Ian Harry</span>
<span class="c">#</span>
<span class="c"># This program is free software; you can redistribute it and/or modify it</span>
<span class="c"># under the terms of the GNU General Public License as published by the</span>
<span class="c"># Free Software Foundation; either version 3 of the License, or (at your</span>
<span class="c"># option) any later version.</span>
<span class="c">#</span>
<span class="c"># This program is distributed in the hope that it will be useful, but</span>
<span class="c"># WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General</span>
<span class="c"># Public License for more details.</span>
<span class="c">#</span>
<span class="c"># You should have received a copy of the GNU General Public License along</span>
<span class="c"># with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="c"># 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span>

<span class="c">#</span>
<span class="c"># =============================================================================</span>
<span class="c">#</span>
<span class="c">#                                   Preamble</span>
<span class="c">#</span>
<span class="c"># =============================================================================</span>
<span class="c">#</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module provides a wrapper to the ConfigParser utilities for pycbc</span>
<span class="sd">workflow construction. This module is described in the page here:</span>
<span class="sd">https://ldas-jobs.ligo.caltech.edu/~cbc/docs/pycbc/ahope/initialization_inifile.html</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">distutils.spawn</span>
<span class="kn">import</span> <span class="nn">ConfigParser</span>
<span class="kn">import</span> <span class="nn">glue.pipeline</span>
<span class="kn">import</span> <span class="nn">pycbc.workflow</span>


<div class="viewcode-block" id="add_workflow_command_line_group"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.add_workflow_command_line_group">[docs]</a><span class="k">def</span> <span class="nf">add_workflow_command_line_group</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard way of initializing a ConfigParser object in workflow will be</span>
<span class="sd">    to do it from the command line. This is done by giving a</span>

<span class="sd">    --local-config-files filea.ini fileb.ini filec.ini</span>

<span class="sd">    command. You can also set config file override commands on the command</span>
<span class="sd">    line. This will be most useful when setting (for example) start and</span>
<span class="sd">    end times, or active ifos. This is done by</span>

<span class="sd">    --config-overrides section1:option1:value1 section2:option2:value2 ...</span>

<span class="sd">    This can also be given as</span>

<span class="sd">    --config-overrides section1:option1</span>

<span class="sd">    where the value will be left as &#39;&#39;.</span>

<span class="sd">    This function returns an argparse OptionGroup to ensure these options are</span>
<span class="sd">    parsed correctly and can then be sent directly to initialize an</span>
<span class="sd">    WorkflowConfigParser.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    parser : argparse.ArgumentParser instance</span>
<span class="sd">        The initialized argparse instance to add the workflow option group to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">workflowArgs</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;workflow&#39;</span><span class="p">,</span>
                                          <span class="s">&#39;Options needed for workflow setup.&#39;</span><span class="p">)</span>
    <span class="n">workflowArgs</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--local-config-files&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
                           <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;CONFIGFILE&quot;</span><span class="p">,</span>
                           <span class="n">help</span><span class="o">=</span><span class="s">&quot;List of localconfig files to be used in &quot;</span>
                                <span class="s">&quot;analysis.&quot;</span><span class="p">)</span>
    <span class="n">workflowArgs</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--installed-config-files&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">,</span>
                           <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;CONFIGFILE&quot;</span><span class="p">,</span> 
                           <span class="n">help</span><span class="o">=</span><span class="s">&quot;List of preinstalled config files to be used &quot;</span>
                                <span class="s">&quot;in analysis&quot;</span><span class="p">)</span>
    <span class="n">workflowArgs</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">&quot;--config-overrides&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">&quot;*&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
                           <span class="n">metavar</span><span class="o">=</span><span class="s">&quot;SECTION:OPTION:VALUE&quot;</span><span class="p">,</span>
                           <span class="n">help</span><span class="o">=</span><span class="s">&quot;List of section,option,value combinations to add into the configuration file. Normally the gps start and end times might be provided this way, and user specific locations (ie. output directories). This can also be provided as SECTION:OPTION or SECTION:OPTION: both of which indicate that the corresponding value is left blank.&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser">[docs]</a><span class="k">class</span> <span class="nc">WorkflowConfigParser</span><span class="p">(</span><span class="n">glue</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">DeepCopyableConfigParser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a sub-class of glue.pipeline.DeepCopyableConfigParser, which lets</span>
<span class="sd">    us add a few additional helper features that are useful in workflows.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configFiles</span><span class="o">=</span><span class="p">[],</span> <span class="n">overrideTuples</span><span class="o">=</span><span class="p">[],</span> <span class="n">parsedFilePath</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an WorkflowConfigParser. This reads the input configuration</span>
<span class="sd">        files, overrides values if necessary and performs the interpolation.</span>
<span class="sd">        See https://ldas-jobs.ligo.caltech.edu/~cbc/docs/pycbc/ahope/initialization_inifile.html</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        configFiles : Path to .ini file, or list of paths</span>
<span class="sd">            The file(s) to be read in and parsed.</span>
<span class="sd">        overrideTuples : List of (section, option, value) tuples</span>
<span class="sd">            Add the (section, option, value) triplets provided</span>
<span class="sd">            in this list to the provided .ini file(s). If the section, option</span>
<span class="sd">            pair is already present, it will be overwritten.</span>
<span class="sd">        parsedFilePath : Path, optional (default=None)</span>
<span class="sd">            If given, write the parsed .ini file back to disk at this location.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        WorkflowConfigParser</span>
<span class="sd">            Initialized WorkflowConfigParser instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">glue</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">DeepCopyableConfigParser</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
        <span class="c"># Enable case sensitive options</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionxform</span> <span class="o">=</span> <span class="nb">str</span>

        <span class="k">for</span> <span class="n">confFile</span> <span class="ow">in</span> <span class="n">configFiles</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">confFile</span><span class="p">):</span>
                <span class="n">errMsg</span> <span class="o">=</span> <span class="s">&quot;File </span><span class="si">%s</span><span class="s"> does not exist.&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">confFile</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errMsg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_ini_file</span><span class="p">(</span><span class="n">configFiles</span><span class="p">)</span>

        <span class="c"># Do overrides first</span>
        <span class="k">for</span> <span class="n">override</span> <span class="ow">in</span> <span class="n">overrideTuples</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">override</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]:</span>
                <span class="k">print</span> <span class="n">override</span>
                <span class="n">errMsg</span> <span class="o">=</span> <span class="s">&quot;Overrides must be tuples of length 2 or 3.&quot;</span>
                <span class="n">errMsg</span> <span class="o">=</span> <span class="s">&quot;Got </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">override</span><span class="p">))</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errMsg</span><span class="p">)</span>
            <span class="n">section</span> <span class="o">=</span> <span class="n">override</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">option</span> <span class="o">=</span> <span class="n">override</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">override</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">override</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="c"># Check for section existence, create if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="c"># Replace exe macros with full paths</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">perform_exe_expansion</span><span class="p">()</span>

        <span class="c"># Check for any substitutions that can be made</span>
        <span class="c"># FIXME: The python 3 version of ConfigParser can do this automatically</span>
        <span class="c"># move over to that if it can be backported to python2.X.</span>
        <span class="c"># We use the same formatting as the new configparser module when doing</span>
        <span class="c"># ExtendedInterpolation</span>
        <span class="c"># This is described at</span>
        <span class="c"># http://docs.python.org/3.4/library/configparser.html</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">perform_extended_interpolation</span><span class="p">()</span>

        <span class="c"># Split sections like [inspiral&amp;tmplt] into [inspiral] and [tmplt]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">split_multi_sections</span><span class="p">()</span>

        <span class="c"># Check for duplicate options in sub-sections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sanity_check_subsections</span><span class="p">()</span>

        <span class="c"># Dump parsed .ini file if needed</span>
        <span class="k">if</span> <span class="n">parsedFilePath</span><span class="p">:</span>
            <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">parsedFilePath</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">cp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="WorkflowConfigParser.from_args"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.from_args">[docs]</a>    <span class="k">def</span> <span class="nf">from_args</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a WorkflowConfigParser instance using the command line values</span>
<span class="sd">        parsed in args. args must contain the values provided by the</span>
<span class="sd">        workflow_command_line_group() function. If you are not using the standard</span>
<span class="sd">        workflow command line interface, you should probably initialize directly</span>
<span class="sd">        using __init__()</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        args : argparse.ArgumentParser</span>
<span class="sd">            The command line arguments parsed by argparse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Identify the config files</span>
        <span class="n">confFiles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c"># Local files that contain the full path</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">local_config_files</span><span class="p">:</span>
            <span class="n">confFiles</span> <span class="o">+=</span> <span class="n">args</span><span class="o">.</span><span class="n">local_config_files</span>
        
        <span class="c"># Installed configuration files specific to the version of PyCBC</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">installed_config_files</span><span class="p">:</span>
            <span class="n">installed_config_files</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">config_file</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">installed_config_files</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pycbc</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">INI_FILE_DIRECTORY</span><span class="p">,</span> <span class="n">config_file</span><span class="p">)</span>
                <span class="n">installed_config_files</span> <span class="o">+=</span> <span class="p">[</span><span class="n">path</span><span class="p">]</span>
            <span class="n">confFiles</span> <span class="o">+=</span> <span class="n">installed_config_files</span> 

        <span class="c"># Identify the overrides</span>
        <span class="n">confOverrides</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">config_overrides</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="c"># and parse them</span>
        <span class="n">parsedOverrides</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">override</span> <span class="ow">in</span> <span class="n">confOverrides</span><span class="p">:</span>
            <span class="n">splitOverride</span> <span class="o">=</span> <span class="n">override</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splitOverride</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">parsedOverrides</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">splitOverride</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">splitOverride</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">parsedOverrides</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">splitOverride</span> <span class="o">+</span> <span class="p">[</span><span class="s">&quot;&quot;</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s">&quot;Overrides must be of format section:option:value &quot;</span>
                    <span class="s">&quot;or section:option. Cannot parse </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">override</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="n">confFiles</span><span class="p">,</span> <span class="n">parsedOverrides</span><span class="p">)</span> 

</div>
<div class="viewcode-block" id="WorkflowConfigParser.read_ini_file"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.read_ini_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_ini_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpFile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read a .ini file and return it as a ConfigParser class.</span>
<span class="sd">        This function does none of the parsing/combining of sections. It simply</span>
<span class="sd">        reads the file and returns it unedited</span>

<span class="sd">        Stub awaiting more functionality - see configparser_test.py</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cpFile : Path to .ini file, or list of paths</span>
<span class="sd">            The path(s) to a .ini file to be read in</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cp : ConfigParser</span>
<span class="sd">            The ConfigParser class containing the read in .ini file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Read the file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">cpFile</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.perform_exe_expansion"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.perform_exe_expansion">[docs]</a>    <span class="k">def</span> <span class="nf">perform_exe_expansion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will look through the executables section of the</span>
<span class="sd">        ConfigParser object and replace any values using macros with full paths.</span>

<span class="sd">        For any values that look like </span>

<span class="sd">        ${which:lalapps_tmpltbank}</span>

<span class="sd">        will be replaced with the equivalent of which(lalapps_tmpltbank)</span>

<span class="sd">        Otherwise values will be unchanged.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Only works on executables section</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="s">&#39;executables&#39;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">option</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="s">&#39;executables&#39;</span><span class="p">):</span>
                <span class="c"># Check the value</span>
                <span class="n">newStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_exe</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">newStr</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;executables&#39;</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">newStr</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.interpolate_exe"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.interpolate_exe">[docs]</a>    <span class="k">def</span> <span class="nf">interpolate_exe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">testString</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replace testString with a path to an executable based on the format.</span>

<span class="sd">        If this looks like</span>

<span class="sd">        ${which:lalapps_tmpltbank}</span>
<span class="sd"> </span>
<span class="sd">        it will return the equivalent of which(lalapps_tmpltbank)</span>

<span class="sd">        Otherwise it will return an unchanged string.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        testString : string</span>
<span class="sd">            The input string</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        newString : string</span>
<span class="sd">            The output string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># First check if any interpolation is needed and abort if not</span>
        <span class="n">testString</span> <span class="o">=</span> <span class="n">testString</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">testString</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;${&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">testString</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;}&#39;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">testString</span>

        <span class="c"># This may not be an exe interpolation, so even if it has ${XXX} form</span>
        <span class="c"># I may not have to do anything</span>
        <span class="n">newString</span> <span class="o">=</span> <span class="n">testString</span>

        <span class="c"># Strip the ${ and }</span>
        <span class="n">testString</span> <span class="o">=</span> <span class="n">testString</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">testList</span> <span class="o">=</span> <span class="n">testString</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>

        <span class="c"># Maybe we can add a few different possibilities for substitution</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">testList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">testList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;which&#39;</span><span class="p">:</span>
                <span class="n">newString</span> <span class="o">=</span> <span class="n">distutils</span><span class="o">.</span><span class="n">spawn</span><span class="o">.</span><span class="n">find_executable</span><span class="p">(</span><span class="n">testList</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">newString</span><span class="p">:</span>
                    <span class="n">errMsg</span> <span class="o">=</span> <span class="s">&quot;Cannot find exe </span><span class="si">%s</span><span class="s"> in your path &quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">testList</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">errMsg</span> <span class="o">+=</span> <span class="s">&quot;and you specified ${which:</span><span class="si">%s</span><span class="s">}.&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">testList</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errMsg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">newString</span>
</div>
<div class="viewcode-block" id="WorkflowConfigParser.get_subsections"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.get_subsections">[docs]</a>    <span class="k">def</span> <span class="nf">get_subsections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a list of subsections for the given section name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subsections</span> <span class="o">=</span> <span class="p">[</span><span class="n">sec</span> <span class="k">for</span> <span class="n">sec</span> <span class="ow">in</span>  <span class="bp">self</span><span class="o">.</span><span class="n">sections</span><span class="p">()</span> <span class="k">if</span> <span class="n">sec</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">section_name</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span><span class="p">)]</span>   

        <span class="k">for</span> <span class="n">sec</span> <span class="ow">in</span> <span class="n">subsections</span><span class="p">:</span>
            <span class="n">sp</span> <span class="o">=</span> <span class="n">sec</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
            <span class="c"># This is unusual, but a format [section-subsection-tag] is okay. Just</span>
            <span class="c"># check that [section-subsection] section exists. If not it is possible</span>
            <span class="c"># the user is trying to use an subsection name with &#39;-&#39; in it</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">])):</span>
                 <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s">&quot;Workflow uses the &#39;-&#39; as a delimiter so this is&quot;</span>
                     <span class="s">&quot;interpreted as section-subsection-tag. &quot;</span>
                     <span class="s">&quot;While checking section </span><span class="si">%s</span><span class="s">, no section with &quot;</span>
                     <span class="s">&quot;name </span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s"> was found. &quot;</span> 
                     <span class="s">&quot;If you did not intend to use tags in an &quot;</span>
                     <span class="s">&quot;&#39;advanced user&#39; manner, or do not understand what &quot;</span>
                     <span class="s">&quot;this means, don&#39;t use dashes in section &quot;</span>
                     <span class="s">&quot;names. So [injection-nsbhinj] is good. &quot;</span>
                     <span class="s">&quot;[injection-nsbh-inj] is not.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sec</span><span class="p">,</span> <span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subsections</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">sec</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">sec</span> <span class="ow">in</span> <span class="n">subsections</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="WorkflowConfigParser.perform_extended_interpolation"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.perform_extended_interpolation">[docs]</a>    <span class="k">def</span> <span class="nf">perform_extended_interpolation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Filter through an ini file and replace all examples of </span>
<span class="sd">        ExtendedInterpolation formatting with the exact value. For values like</span>
<span class="sd">        ${example} this is replaced with the value that corresponds to the</span>
<span class="sd">        option called example ***in the same section***</span>

<span class="sd">        For values like ${common|example} this is replaced with the value that</span>
<span class="sd">        corresponds to the option example in the section [common]. Note that</span>
<span class="sd">        in the python3 config parser this is ${common:example} but python2.7</span>
<span class="sd">        interprets the : the same as a = and this breaks things</span>

<span class="sd">        Nested interpolation is not supported here.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># Do not allow any interpolation of the section names</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sections</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">option</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
                <span class="c"># Check the option name</span>
                <span class="n">newStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_string</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">newStr</span> <span class="o">!=</span> <span class="n">option</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">section</span><span class="p">,</span><span class="n">newStr</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_option</span><span class="p">(</span><span class="n">section</span><span class="p">,</span><span class="n">option</span><span class="p">)</span>
                <span class="c"># Check the value</span>
                <span class="n">newStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_string</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">newStr</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">section</span><span class="p">,</span><span class="n">option</span><span class="p">,</span><span class="n">newStr</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.interpolate_string"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.interpolate_string">[docs]</a>    <span class="k">def</span> <span class="nf">interpolate_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">testString</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Take a string and replace all example of ExtendedInterpolation</span>
<span class="sd">        formatting within the string with the exact value. </span>

<span class="sd">        For values like ${example} this is replaced with the value that</span>
<span class="sd">        corresponds to the option called example ***in the same section***</span>

<span class="sd">        For values like ${common|example} this is replaced with the value that</span>
<span class="sd">        corresponds to the option example in the section [common]. Note that</span>
<span class="sd">        in the python3 config parser this is ${common:example} but python2.7</span>
<span class="sd">        interprets the : the same as a = and this breaks things</span>

<span class="sd">        Nested interpolation is not supported here.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        testString : String</span>
<span class="sd">            The string to parse and interpolate</span>
<span class="sd">        section : String</span>
<span class="sd">            The current section of the ConfigParser object</span>

<span class="sd">        Returns</span>
<span class="sd">        ----------</span>
<span class="sd">        testString : String</span>
<span class="sd">            Interpolated string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># First check if any interpolation is needed and abort if not</span>
        <span class="n">reObj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\$\{.*?\}&quot;</span><span class="p">,</span> <span class="n">testString</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">reObj</span><span class="p">:</span>
            <span class="c"># Not really sure how this works, but this will obtain the first</span>
            <span class="c"># instance of a string contained within ${....}</span>
            <span class="n">repString</span> <span class="o">=</span> <span class="p">(</span><span class="n">reObj</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="c"># Need to test which of the two formats we have</span>
            <span class="n">splitString</span> <span class="o">=</span> <span class="n">repString</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;|&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splitString</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">testString</span> <span class="o">=</span> <span class="n">testString</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;${&#39;</span><span class="o">+</span><span class="n">repString</span><span class="o">+</span><span class="s">&#39;}&#39;</span><span class="p">,</span>\
                                            <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span><span class="n">splitString</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s">&quot;Substitution failed&quot;</span>
                    <span class="k">raise</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splitString</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">testString</span> <span class="o">=</span> <span class="n">testString</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;${&#39;</span><span class="o">+</span><span class="n">repString</span><span class="o">+</span><span class="s">&#39;}&#39;</span><span class="p">,</span>\
                                       <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">splitString</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">splitString</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">NoOptionError</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s">&quot;Substitution failed&quot;</span>
                    <span class="k">raise</span>
            <span class="n">reObj</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r&quot;\$\{.*?\}&quot;</span><span class="p">,</span> <span class="n">testString</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">testString</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.split_multi_sections"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.split_multi_sections">[docs]</a>    <span class="k">def</span> <span class="nf">split_multi_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse through the WorkflowConfigParser instance and splits any sections</span>
<span class="sd">        labelled with an &quot;&amp;&quot; sign (for e.g. [inspiral&amp;tmpltbank]) into</span>
<span class="sd">        [inspiral] and [tmpltbank] sections. If these individual sections</span>
<span class="sd">        already exist they  will be appended to. If an option exists in both the</span>
<span class="sd">        [inspiral] and [inspiral&amp;tmpltbank] sections an error will be thrown</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Begin by looping over all sections</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sections</span><span class="p">():</span>
            <span class="c"># Only continue if section needs splitting</span>
            <span class="k">if</span> <span class="s">&#39;&amp;&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">section</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c"># Get list of section names to add these options to</span>
            <span class="n">splitSections</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;&amp;&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">newSec</span> <span class="ow">in</span> <span class="n">splitSections</span><span class="p">:</span>
                <span class="c"># Add sections if they don&#39;t already exist</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">newSec</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">newSec</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_options_to_section</span><span class="p">(</span><span class="n">newSec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.add_options_to_section"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.add_options_to_section">[docs]</a>    <span class="k">def</span> <span class="nf">add_options_to_section</span><span class="p">(</span><span class="bp">self</span> <span class="p">,</span><span class="n">section</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">overwrite_options</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a set of options and values to a section of a ConfigParser object.</span>
<span class="sd">        Will throw an error if any of the options being added already exist,</span>
<span class="sd">        this behaviour can be overridden if desired</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        section : string</span>
<span class="sd">            The name of the section to add options+values to</span>
<span class="sd">        items : list of tuples</span>
<span class="sd">            Each tuple contains (at [0]) the option and (at [1]) the value to</span>
<span class="sd">            add to the section of the ini file</span>
<span class="sd">        overwrite_options : Boolean, optional</span>
<span class="sd">            By default this function will throw a ValueError if an option exists</span>
<span class="sd">            in both the original section in the ConfigParser *and* in the</span>
<span class="sd">            provided items.</span>
<span class="sd">            This will override so that the options+values given in items</span>
<span class="sd">            will replace the original values if the value is set to True.</span>
<span class="sd">            Default = True </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Sanity checking</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Section </span><span class="si">%s</span><span class="s"> not present in ConfigParser.&#39;</span> \
                             <span class="o">%</span><span class="p">(</span><span class="n">section</span><span class="p">,))</span>

        <span class="c"># Check for duplicate options first</span>
        <span class="k">for</span> <span class="n">option</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">overwrite_options</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">option</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Option exists in both original &#39;</span> <span class="o">+</span> \
                                  <span class="s">&#39;ConfigParser section [</span><span class="si">%s</span><span class="s">] and &#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">section</span><span class="p">,)</span> <span class="o">+</span> \
                                  <span class="s">&#39;input list: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">option</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">section</span><span class="p">,</span><span class="n">option</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.sanity_check_subsections"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.sanity_check_subsections">[docs]</a>    <span class="k">def</span> <span class="nf">sanity_check_subsections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function goes through the ConfigParset and checks that any options</span>
<span class="sd">        given in the [SECTION_NAME] section are not also given in any </span>
<span class="sd">        [SECTION_NAME-SUBSECTION] sections.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Loop over the sections in the ini file</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sections</span><span class="p">():</span>
            <span class="c"># Loop over the sections again</span>
            <span class="k">for</span> <span class="n">section2</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sections</span><span class="p">():</span>
                <span class="c"># Check if any are subsections of section</span>
                <span class="k">if</span> <span class="n">section2</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">section</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span><span class="p">):</span>
                    <span class="c"># Check for duplicate options whenever this exists</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">check_duplicate_options</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">section2</span><span class="p">,</span>
                                                 <span class="n">raise_error</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.check_duplicate_options"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.check_duplicate_options">[docs]</a>    <span class="k">def</span> <span class="nf">check_duplicate_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section1</span><span class="p">,</span> <span class="n">section2</span><span class="p">,</span> <span class="n">raise_error</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check for duplicate options in two sections, section1 and section2.</span>
<span class="sd">        Will return a list of the duplicate options.</span>
<span class="sd">    </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        section1 : string</span>
<span class="sd">            The name of the first section to compare</span>
<span class="sd">        section2 : string</span>
<span class="sd">            The name of the second section to compare</span>
<span class="sd">        raise_error : Boolean, optional (default=False)</span>
<span class="sd">            If True, raise an error if duplicates are present.</span>

<span class="sd">        Returns</span>
<span class="sd">        ----------</span>
<span class="sd">        duplicates : List</span>
<span class="sd">            List of duplicate options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Sanity checking</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Section </span><span class="si">%s</span><span class="s"> not present in ConfigParser.&#39;</span>\
                             <span class="o">%</span><span class="p">(</span><span class="n">section1</span><span class="p">,)</span> <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">section2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Section </span><span class="si">%s</span><span class="s"> not present in ConfigParser.&#39;</span>\
                             <span class="o">%</span><span class="p">(</span><span class="n">section2</span><span class="p">,)</span> <span class="p">)</span>

        <span class="n">items1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section1</span><span class="p">)</span>
        <span class="n">items2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section2</span><span class="p">)</span>

        <span class="c"># The list comprehension here creates a list of all duplicate items</span>
        <span class="n">duplicates</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items1</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items2</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">duplicates</span> <span class="ow">and</span> <span class="n">raise_error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;The following options appear in both section &#39;</span> <span class="o">+</span>\
                             <span class="s">&#39;</span><span class="si">%s</span><span class="s"> and </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> \
                             <span class="o">%</span><span class="p">(</span><span class="n">section1</span><span class="p">,</span><span class="n">section2</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">duplicates</span><span class="p">)))</span>

        <span class="k">return</span> <span class="n">duplicates</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.get_opt_tag"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.get_opt_tag">[docs]</a>    <span class="k">def</span> <span class="nf">get_opt_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function accessing get_opt_tags() for a single tag: see </span>
<span class="sd">        documentation for that function.</span>
<span class="sd">        NB calling get_opt_tags() directly is preferred for simplicity.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        self : ConfigParser object</span>
<span class="sd">            The ConfigParser object (automatically passed when this is appended</span>
<span class="sd">            to the ConfigParser class)</span>
<span class="sd">        section : string</span>
<span class="sd">            The section of the ConfigParser object to read</span>
<span class="sd">        option : string</span>
<span class="sd">            The ConfigParser option to look for</span>
<span class="sd">        tag : string</span>
<span class="sd">            The name of the subsection to look in, if not found in [section]</span>
<span class="sd"> </span>
<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        string</span>
<span class="sd">            The value of the options being searched for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">get_opt_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="p">[</span><span class="n">tag</span><span class="p">])</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.get_opt_tags"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.get_opt_tags">[docs]</a>    <span class="k">def</span> <span class="nf">get_opt_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Supplement to ConfigParser.ConfigParser.get(). This will search for an</span>
<span class="sd">        option in [section] and if it doesn&#39;t find it will also try in</span>
<span class="sd">        [section-tag] for every value of tag in tags.</span>
<span class="sd">        Will raise a ConfigParser.Error if it cannot find a value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        self : ConfigParser object</span>
<span class="sd">            The ConfigParser object (automatically passed when this is appended</span>
<span class="sd">            to the ConfigParser class)</span>
<span class="sd">        section : string</span>
<span class="sd">            The section of the ConfigParser object to read</span>
<span class="sd">        option : string</span>
<span class="sd">            The ConfigParser option to look for</span>
<span class="sd">        tags : list of strings</span>
<span class="sd">            The name of subsections to look in, if not found in [section]</span>
<span class="sd"> </span>
<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        string</span>
<span class="sd">            The value of the options being searched for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Need lower case tag name; also exclude cases with tag=None</span>
        <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span> <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="n">errString</span> <span class="o">=</span> <span class="s">&quot;No option &#39;</span><span class="si">%s</span><span class="s">&#39; in section [</span><span class="si">%s</span><span class="s">] &quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">option</span><span class="p">,</span><span class="n">section</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tags</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="n">errString</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
            <span class="n">returnVals</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">sectionList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">tag</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">tag</span><span class="p">),</span> <span class="n">option</span><span class="p">):</span>
                        <span class="n">returnVals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">tag</span><span class="p">),</span>
                                                    <span class="n">option</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">returnVals</span><span class="p">:</span>
                <span class="n">errString</span> <span class="o">+=</span> <span class="s">&quot;or in sections [</span><span class="si">%s</span><span class="s">].&quot;</span> <span class="o">%</span><span class="p">(</span><span class="s">&quot;] [&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sectionList</span><span class="p">))</span>
                <span class="k">raise</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="n">errString</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">returnVals</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">errString</span> <span class="o">+=</span> <span class="s">&quot;and multiple entries found in sections [</span><span class="si">%s</span><span class="s">].&quot;</span>\
                              <span class="o">%</span><span class="p">(</span><span class="s">&quot;] [&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sectionList</span><span class="p">))</span>
                <span class="k">raise</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="n">errString</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">returnVals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.has_option_tag"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.has_option_tag">[docs]</a>    <span class="k">def</span> <span class="nf">has_option_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function accessing has_option_tags() for a single tag: see</span>
<span class="sd">        documentation for that function.</span>
<span class="sd">        NB calling has_option_tags() directly is preferred for simplicity.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        self : ConfigParser object</span>
<span class="sd">            The ConfigParser object (automatically passed when this is appended</span>
<span class="sd">            to the ConfigParser class)</span>
<span class="sd">        section : string</span>
<span class="sd">            The section of the ConfigParser object to read</span>
<span class="sd">        option : string</span>
<span class="sd">            The ConfigParser option to look for</span>
<span class="sd">        tag : string</span>
<span class="sd">            The name of the subsection to look in, if not found in [section]</span>
<span class="sd"> </span>
<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Boolean</span>
<span class="sd">            Is the option in the section or [section-tag]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">has_option_tags</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="p">[</span><span class="n">tag</span><span class="p">])</span>

</div>
<div class="viewcode-block" id="WorkflowConfigParser.has_option_tags"><a class="viewcode-back" href="../../../pycbc.workflow.html#pycbc.workflow.configuration.WorkflowConfigParser.has_option_tags">[docs]</a>    <span class="k">def</span> <span class="nf">has_option_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Supplement to ConfigParser.ConfigParser.has_option().</span>
<span class="sd">        This will search for an option in [section] and if it doesn&#39;t find it</span>
<span class="sd">        will also try in [section-tag] for each value in tags.</span>
<span class="sd">        Returns True if the option is found and false if not.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        self : ConfigParser object</span>
<span class="sd">            The ConfigParser object (automatically passed when this is appended</span>
<span class="sd">            to the ConfigParser class)</span>
<span class="sd">        section : string</span>
<span class="sd">            The section of the ConfigParser object to read</span>
<span class="sd">        option : string</span>
<span class="sd">            The ConfigParser option to look for</span>
<span class="sd">        tags : list of strings</span>
<span class="sd">            The names of the subsection to look in, if not found in [section]</span>
<span class="sd"> </span>
<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        Boolean</span>
<span class="sd">            Is the option in the section or [section-tag] (for tag in tags)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_opt_tags</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">except</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span></div></div>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Alexander Nitz.
      Last updated on Sep 08, 2015.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>