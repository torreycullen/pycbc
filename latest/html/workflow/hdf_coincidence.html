

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HDF5 Based Coincidence Code &mdash; PyCBC 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PyCBC 0.1 documentation" href="../index.html"/>
        <link rel="up" title="Workflow: the inspiral analysis workflow generator (pycbc.workflow)" href="../workflow.html"/>
        <link rel="next" title="The workflow postprocessing preparation module" href="postprocprep.html"/>
        <link rel="prev" title="The workflow coincidence module" href="coincidence.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PyCBC
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_psd_estimation_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_coinc_search_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_sngl_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code>: A single-ifo detchar workflow generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="pygrb.html"><code class="docutils literal"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal"><span class="pre">pycbc.tmpltbank</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../waveform.html">Waveforms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frame.html">Reading Gravitational-wave Frames (<code class="docutils literal"><span class="pre">pycbc.frame</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../workflow.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../workflow.html#workflow-module-documentation">Workflow module documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#initialization">Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#generating-segments">Generating segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#obtaining-data">Obtaining data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#injection-generation">Injection generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#time-slide-generation">Time-slide generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#template-bank">Template bank</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#split-table">Split table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#matched-filtering">Matched-filtering</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../workflow.html#coincidence">Coincidence</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="coincidence.html">The workflow coincidence module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="">HDF5 Based Coincidence Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#post-processing-preparation">Post processing preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#post-processing">Post-processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../workflow.html#method-documentation">Method documentation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">pycbc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PyCBC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a> &raquo;</li>
      
    <li>HDF5 Based Coincidence Code</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/workflow/hdf_coincidence.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hdf5-based-coincidence-code">
<span id="workflowintervalcoincmod"></span><h1>HDF5 Based Coincidence Code<a class="headerlink" href="#hdf5-based-coincidence-code" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>On this page we go over how to use the interval slides based post processing
functionality in PyCBC.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This functionality is experimental and under active development.
No gaurantee of stability is given at this time. Contact Alex Nitz (<a class="reference external" href="mailto:alex&#46;nitz&#37;&#52;&#48;ligo&#46;org">alex<span>&#46;</span>nitz<span>&#64;</span>ligo<span>&#46;</span>org</a>)
if you have questions, issues, comments, etc.</p>
</div>
<p>The post processing discussed here implements coincidence, background estimation,
injection finding, and some basic plotting infrastructure based on hdf files.</p>
<p>This document assumes that one is familiar with the standard pycbc workflow modules.
Only differences from the standard configuration are discussed here.</p>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>There are several limitations that may not be familiar to people used to existing
post-processing codes.</p>
<p>The following restrictions are not slated to be changed in the near future.</p>
<ul class="simple">
<li>Coincidence is exact match only</li>
</ul>
<p>The following restrictions are slated to be be removed when time permits</p>
<ul class="simple">
<li>Only two detector searches are implemented</li>
<li>The significance estimation does not include any parameter space binning</li>
<li>Only a single fixed template bank for the entire anlysis is possible</li>
</ul>
</div>
<div class="section" id="configuration-file">
<h2>Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>An example configuration file is included as example_hdf_post.ini. This acts as a supplement to the standard ini files. It does not stand alone.</p>
<div class="section" id="workflow-configuration">
<h3>Workflow Configuration<a class="headerlink" href="#workflow-configuration" title="Permalink to this headline">¶</a></h3>
<p>The following are the sections used to configure the workflow.</p>
<ul class="simple">
<li>[workflow-coincidence]</li>
</ul>
<p>There is one option related to the performance of the background estimation and coincidence.</p>
<ul class="simple">
<li>&#8211;parallelization-factor</li>
</ul>
<p>This is an integer that determines the total number of jobs to calculate the foreground and background
coincidences for the entire run. The number is inversely proportional to the memory usage of each job, and the expected run time.
A factor of 10 is sufficient for a one month run with an SNR threshold of 5.0, 8000 templates, and a timeslide every 1.1 seconds.
To ensure short running jobs, the factor should be increased in proportion to the number of background triggers.
The memory usage of each jobs is only porportional to the fraction of single detector triggers that are read in.</p>
</div>
<div class="section" id="executable-configuration">
<h3>Executable Configuration<a class="headerlink" href="#executable-configuration" title="Permalink to this headline">¶</a></h3>
<p>There following executables are used in the coincidence, injection finding, and
plotting. They following needs to be in your [executables] section.:</p>
<div class="highlight-python"><div class="highlight"><pre>bank2hdf = ${which:pycbc_coinc_bank2hdf}
trig2hdf = ${which:pycbc_coinc_trig2hdf}
hdfinjfind = ${which:pycbc_coinc_hdfinjfind}
coinc = ${which:pycbc_coinc_findtrigs}
statmap = ${which:pycbc_coinc_statmap}
plot_sensitivity = ${which:pycbc_page_sensitivity}
plot_foundmissed = ${which:pycbc_page_foundmissed}
plot_snrifar = ${which:pycbc_page_snrifar}
plot_snrchi = ${which:pycbc_page_snrchi}
page_foreground = ${which:pycbc_page_foreground}
hdf_trigger_merge = ${which:pycbc_coinc_mergetrigs}
</pre></div>
</div>
<p>Executables that do not require any additional configuration.</p>
<ul class="simple">
<li>bank2hdf : This converts the xml based template bank file to an hdf format.</li>
<li>trig2hdf : This converts the xml based inspiral trigger file to an hdf file. If you have used a split template bank they are recombined into a single hdf file.</li>
<li>plot_foundmissed : Make an interactive found missed plot.</li>
<li>plot_snrifar : Makes ifar vs SNR cumulative plots</li>
</ul>
<div class="section" id="options-to-the-coincidence-background-executable">
<h4>Options to the coincidence/background executable<a class="headerlink" href="#options-to-the-coincidence-background-executable" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre>[coinc]
; Coincidence is based on the time-of-flight. This options sets how many
; seconds to add to this fixed window.
coinc-threshold = .005
; Background coincident triggers are decimated. This option controls how
;many of the loudest triggers to keep from each group of templates.
loudest-keep = 200
; For now, don&#39;t touch these options, but they control how to decimate low
; significane triggers.
decimation-factor = 1000

[coinc-inj]
[coinc-full]
; The time interval in seconds between each timeslide.
timeslide-interval=1.9
</pre></div>
</div>
</div>
<div class="section" id="options-to-the-coincidence-clustering-statistic-asignment-executable">
<h4>Options to the coincidence clustering + statistic asignment executable<a class="headerlink" href="#options-to-the-coincidence-clustering-statistic-asignment-executable" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre>[statmap]
; The only option is to set the time window in seconds to cluster
; coincident triggers over the entire template bank
cluster-window = 5.0
</pre></div>
</div>
</div>
<div class="section" id="options-to-the-injection-finding-executable">
<h4>Options to the injection finding executable<a class="headerlink" href="#options-to-the-injection-finding-executable" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre>[hdfinjfind]
; Injections are associated to triggers by time alone. The one option
; determines the size in seconds of the window. Make sure this is smaller
; then the coincident clustering window, otherwise note that injections
; found in association with multiple triggers are simply marked as missed.
injection-window = 1.0
</pre></div>
</div>
</div>
<div class="section" id="options-for-sensitivity-plotting">
<h4>Options for sensitivity plotting<a class="headerlink" href="#options-for-sensitivity-plotting" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre>[plot_sensitivity]
; The type of bins to use. Options are mchirp, total_mass, or spin.
bin-type =  mchirp
; The bin boundaries
bins = 0.89 1.31 1.74 2.17 2.60
min-dist = 40
max-dist = 120
; The number of distance bins. If there is no injection in a bin, it fails, as it should!
; Remove this option to use binless sensitivity estimation. The distance bins options
; only exists for comparison to other pipelines where the codes do distance bins.
dist-bins = 15
</pre></div>
</div>
<p>Additional plots can be made by adding a tag. This works similary to the system for injection files. For
example you can add  [plot_sensitivity-mchirp], [plot_sensitivity-mtotal], and [plot_sensitivity-spin]
sections to make three versions of the plot.</p>
</div>
</div>
</div>
<div class="section" id="reusing-data-from-workflow-that-uses-some-other-post-processing">
<h2>Reusing data from workflow that uses some other post-processing<a class="headerlink" href="#reusing-data-from-workflow-that-uses-some-other-post-processing" title="Permalink to this headline">¶</a></h2>
<p>Assuming the list of limitations is satisfied by the previous run, then one
can simply select the &#8216;main.map&#8217; file in the &#8216;&#8211;cache&#8217; option to the
pegasus planner.:</p>
<div class="highlight-python"><div class="highlight"><pre>cd gwanalysis
pycbc_basic_pegasus_plan weekly_ahope.dax $LOGPATH --cache /path/to/prior/worklfow/main.map
</pre></div>
</div>
<p>If the prior workflow did not use the post-processing described on this page, then there is no need
to edit the map file and it can be used as is.</p>
<p>If you are rerunning a workflow using this post-processing, then select from your weekly_ahope.map file only
the files you want to reuse, and then point the &#8216;&#8211;cache&#8217; option to it instead.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="postprocprep.html" class="btn btn-neutral float-right" title="The workflow postprocessing preparation module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coincidence.html" class="btn btn-neutral" title="The workflow coincidence module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Alexander Nitz.
      Last updated on Apr 20, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>