

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The workflow time-slide generation module &mdash; PyCBC 113a27 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PyCBC 113a27 documentation" href="../index.html"/>
        <link rel="up" title="Workflow: the inspiral analysis workflow generator (pycbc.workflow)" href="../workflow.html"/>
        <link rel="next" title="The workflow template bank generation module" href="template_bank.html"/>
        <link rel="prev" title="The workflow injection generation module" href="injections.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PyCBC
          

          
          </a>

          
            
            
              <div class="version">
                1.4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_psd_estimation_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_coinc_search_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_sngl_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code>: A single-ifo detchar workflow generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="pygrb.html"><code class="docutils literal"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_inference_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_inference_workflow</span></code>: A parameter estimation workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal"><span class="pre">pycbc.tmpltbank</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inference.html">PyCBC inference documentation (<code class="docutils literal"><span class="pre">pycbc.inference</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../waveform.html">Waveforms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frame.html">Reading Gravitational-wave Frames (<code class="docutils literal"><span class="pre">pycbc.frame</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../workflow.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../workflow.html#workflow-module-documentation">Workflow module documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#basics-and-overview">Basics and overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#generating-segments">Generating segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#obtaining-data">Obtaining data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#injection-generation">Injection generation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../workflow.html#time-slide-generation">Time-slide generation</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="">The workflow time-slide generation module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#template-bank">Template bank</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#split-table">Split table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#matched-filtering">Matched-filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#coincidence">Coincidence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#post-processing-preparation">Post processing preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#post-processing">Post-processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../workflow.html#method-documentation">Method documentation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">pycbc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PyCBC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a> &raquo;</li>
      
    <li>The workflow time-slide generation module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/workflow/time_slides.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-workflow-time-slide-generation-module">
<span id="workflowtimeslidesmod"></span><h1>The workflow time-slide generation module<a class="headerlink" href="#the-workflow-time-slide-generation-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The time-slide generation sub-module of pycbc&#8217;s workflow module
is responsible for generating time
slide input files, which are used to tell analysis codes which time slides they
need to perform when estimating the background using the time-slides method.
An example of where this is needed is when using ligolw_thinca a time slide xml file is required as input, even if no time slides are being performed (in that case the time slide file corresponds to no-lags only). The module can either
generate time slide files at runtime, within the workflow or take pregenerated
input files.</p>
<p>The return of the time-slide generation module is an pycbc FileList of the time-slide files generated/supplied to this module. It is possible to call this module multiple times by using the tags key-word argument, but we have not foreseen
a case where this would be needed. One call should generate all needed time-slide input files.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Using this module requires a number of things</p>
<ul class="simple">
<li>A configuration file (or files) containing the information needed to tell this module how to generate (or gather) the template banks (described below).</li>
<li>An initialized instance of the pycbc Workflow class, containing the ConfigParser.</li>
</ul>
<p>This module is then called according to</p>
<div class="section" id="configuration-file-setup">
<h3>Configuration file setup<a class="headerlink" href="#configuration-file-setup" title="Permalink to this headline">¶</a></h3>
<p>Here we describe the options given in the configuration file used in the
workflow that will be needed in this section</p>
<div class="section" id="workflow-timeslides-section">
<h4>[workflow-timeslides] section<a class="headerlink" href="#workflow-timeslides-section" title="Permalink to this headline">¶</a></h4>
<p>The configuration file must have a [workflow-timeslides] section, which is used to
tell the workflow how to construct (or gather) the time slide files. The first option to choose and provide is</p>
<ul class="simple">
<li>timeslides-method = VALUE</li>
</ul>
<p>The choices here and their description are as described below</p>
<ul class="simple">
<li>IN_WORKFLOW - The time slide file generation will be added as jobs in the workflow and will be generated after submission of the workflow.</li>
<li>AT_RUNTIME - The time slide jobs will be run directly within this module.</li>
<li>PREGENERATED - The time slide files will be supplied as pregenerated files.</li>
</ul>
<p>For all cases (even PREGENERATED) the following option is needed:</p>
<ul class="simple">
<li>timeslides-exe = VALUE - This tag is used to locate the timeslides exe and the options needed for that exe. It will also identify which time slides are being done, see below for details.</li>
</ul>
<p>When using PREGENERATED the additional option is needed:</p>
<ul class="simple">
<li>timeslides-pregenerated-file = PATH - Specifies the location of the pregenerated time slides file.</li>
</ul>
</div>
<div class="section" id="executables">
<h4>[executables]<a class="headerlink" href="#executables" title="Permalink to this headline">¶</a></h4>
<p><strong>PLEASE READ THIS EVEN IF USING method=PREGENERATED</strong></p>
<p>In this section, if not using PREGENERATED you need to supply the executable that will be used to generate the time slide files. This is done in the [executables] section by adding something like:</p>
<p>timeslides = /path/to/pycbc_timeslides</p>
<p>the option, in this case &#8216;timeslides&#8217;, will be used to specify the constant command line options that are sent to all pycbc_timeslides jobs. This is done in the [timeslides] section and the specific options for each executable is discussed below. The tag &#8216;timeslides&#8217; is taken from the workflow-timeslides section of the configuration file, as described above.</p>
<p><strong>IMPORTANT</strong> the time slides tag name, (e.g. &#8216;timeslides&#8217;), is used to identify which time slide files are to be produced. The module will search for modules called [timeslides-XXXX] and generate one time slide file for every sub-section using XXXX as a tag.</p>
<p>When using the IN_WORKFLOW or AT_RUNTIME options, value pairs in [timeslides-XXXX] are also used to specify options specific to that
particular time slide job. These options will be directly supplied to the
executable being used to generate the file.</p>
<p><strong>PLEASE NOTE:</strong> When using PREGENERATED the time slide names are still identified by looking in the &#8220;tisi-XXXX&#8221; sections (a path in [executables] is not needed). These sections will be empty in this case. Also note that as XXXX is used as a tag you can use [workflow-timeslides-XXXX] section to supply unique pregenerated time slide files. You can also use this to supply a mix of pregenerated, and not-pregenerated time slide files.</p>
<div class="section" id="supported-time-slideexecutables-and-instructions-for-using-them">
<h5>Supported time slideexecutables and instructions for using them<a class="headerlink" href="#supported-time-slideexecutables-and-instructions-for-using-them" title="Permalink to this headline">¶</a></h5>
<p>The following time slide generation executables are currently supported</p>
<ul class="simple">
<li>pycbc_timeslides</li>
</ul>
<p>Adding a new executable is not too hard, please ask a developer for some pointers on how to do this if you want to add a new code.</p>
</div>
</div>
<div class="section" id="pycbc-timeslides">
<h4>pycbc_timeslides<a class="headerlink" href="#pycbc-timeslides" title="Permalink to this headline">¶</a></h4>
<p>pycbc_timeslides is the pycbc python code that is almost identical to the code used for making time slide tables in ihope. The help message for pycbc_timeslides follows</p>
<div class="highlight-text"><div class="highlight"><pre>$ pycbc_timeslides --help
/home/cbc/pycbc/pycbc-virtualenv/lib/python2.6/site-packages/numpy/lib/utils.py:95: DeprecationWarning: `scipy.weave` is deprecated, use `weave` instead!
  warnings.warn(depdoc, DeprecationWarning)
__init__: Setting weave cache to /tmp/506_python26_compiled/113a27/113a2783c11b115e348a4f0876f8ffb38416e5c4
usage: pycbc_timeslides [-h] [--version] [-a filename] [--comment text] [-v]
                        [-i [name=first:last:step [name=first:last:step ...]]]
                        [--inspiral-num-slides [count:instrument=offset[,instrument=offset...]
                        [count:instrument=offset[,instrument=offset...] ...]]]
                        [-n [name=offset [name=offset ...]]]
                        [--remove-zero-lag] --output-files FILE [FILE ...]

pycbc_timeslides constructs time_slide tables, writing the result to one or
more files. Inspiral-style slides are specified by multiples of a fixed offset
vector, with equal numbers of +ve and -ve multiples: the total number of time
slide entries including zerolag is 2*nslides+1. Tisi-style slides are
specified via one or more ranges of offsets for each instrument. If more than
one instrument and set of offsets is given, the time slide table will contain
entries corresponding to all combinations of offsets, one each from the
different instruments. If no file names are given on the command line, output
is written to stdout. If more than one file name is given on the command line,
the time slides are distributed uniformly between files with each file being
given a disjoint subset. Output files whose names end in &#39;.gz&#39; will be gzip
compressed. Example: pycbc_timeslides --verbose --tisi-slides H1=-100:+100:10
L1=-100:+100:+10 time_slides.xml.gz

optional arguments:
  -h, --help            show this help message and exit
  --version             show program&#39;s version number and exit
  -a filename, --add-to filename
                        Add the time slides from this file to the newly-
                        generated time slides If the name ends in &#39;.gz&#39; it
                        will be gzip-decompressed on input.
  --comment text        Set comment string in process table (default = None).
  -v, --verbose         Be verbose.
  -i [name=first:last:step [name=first:last:step ...]], --tisi-slides [name=first:last:step [name=first:last:step ...]]
                        Generate tisi-style (i.e. &#39;new-style&#39;) slides by
                        giving a space-separated list of instrument-specific
                        sets of offsets. The set of offsets is (first + &quot;n *
                        step) where n is an integer such that first &lt;= offset
                        &lt;= last. More than one set of offsets can be given for
                        the same instrument, in which case the union is used.
  --inspiral-num-slides [count:instrument=offset[,instrument=offset...] [count:instrument=offset[,instrument=offset...] ...]]
                        Generate a set of lalapps-thinca-style time slides.
                        The collection of instrument/offset pairs defines an
                        offset vector, the time slides produced are integer
                        multiples n * {offsets} where n is a non-zero integer
                        in [-count, +count]. To generate multiple set of
                        slides, give the option multiple times separated by
                        spaces, e.g. --inspiral-num-slides &#39;50:H1=0,L1=5
                        25:H1=10,V1=0&#39;
  -n [name=offset [name=offset ...]], --normalize [name=offset [name=offset ...]]
                        Normalize the time slides so that a given instrument
                        has the specified offset in all slides. The other
                        offsets in each time slide are adjusted so that the
                        relative offsets are preserved. Time slides that do
                        not involve this instrument are unaffected. If
                        multiple instrument/offset pairs are given, then for
                        each time slide they are considered in alphabetical
                        order by instrument until the first is found that
                        affects the offsets of that time slide. YMMV.
  --remove-zero-lag     Remove the time slide with offsets of 0 for all
                        instruments.
  --output-files FILE [FILE ...]
                        The path to the file(s) in which to write the
                        resulting time slides. If more than one file is
                        present, split the time slides equally over the files.
</pre></div>
</div>
<p>An example of a pycbc_timeslides call, for time slides, is given below</p>
<div class="highlight-bash"><div class="highlight"><pre>/home/spxiwh/lscsoft_git/executables_master/bin/pycbc_timeslides --output-files /home/spxiwh/lscsoft_git/src/pycbc/examples/ahope/weekly_ahope/961585543-961671944/time_slide_files/H1L1V1-TISI_SLIDES-961585543-86401.xml.gz --remove-zero-lag --inspiral-num-slides 100:H1<span class="o">=</span>0,L1<span class="o">=</span>5,V1<span class="o">=</span>10
</pre></div>
</div>
<p>and for zero-lag only</p>
<div class="highlight-bash"><div class="highlight"><pre>/home/spxiwh/lscsoft_git/executables_master/bin/pycbc_timeslides --output-files /home/spxiwh/lscsoft_git/src/pycbc/examples/ahope/weekly_ahope/961585543-961671944/time_slide_files/H1L1V1-TISI_ZEROLAG-961585543-86401.xml.gz --tisi-slides <span class="nv">H1</span><span class="o">=</span>0:0:0 <span class="nv">L1</span><span class="o">=</span>0:0:0 <span class="nv">V1</span><span class="o">=</span>0:0:0
</pre></div>
</div>
<p>The following options are added by the workflow module and <strong>must not</strong> be given in the configuration file</p>
<ul class="simple">
<li>&#8211;output-files</li>
</ul>
</div>
</div>
</div>
<div class="section" id="pycbc-workflow-timeslides-module">
<h2><code class="xref py py-mod docutils literal"><span class="pre">pycbc.workflow.timeslides</span></code> Module<a class="headerlink" href="#pycbc-workflow-timeslides-module" title="Permalink to this headline">¶</a></h2>
<p>This is complete documentation of this module&#8217;s code</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="template_bank.html" class="btn btn-neutral float-right" title="The workflow template bank generation module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="injections.html" class="btn btn-neutral" title="The workflow injection generation module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Alexander Nitz.
      Last updated on Aug 21, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'113a27',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>